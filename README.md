# –ü—Ä–∏–≤—ã—á–∫–∏ (Habit Tracker)

API-—Å–µ—Ä–≤–∏—Å –¥–ª—è –æ—Ç—Å–ª–µ–∂–∏–≤–∞–Ω–∏—è –ø–æ–ª–µ–∑–Ω—ã—Ö –∏ –ø—Ä–∏—è—Ç–Ω—ã—Ö –ø—Ä–∏–≤—ã—á–µ–∫. –ü–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–∏ –º–æ–≥—É—Ç —Å–æ–∑–¥–∞–≤–∞—Ç—å, –ø—Ä–æ—Å–º–∞—Ç—Ä–∏–≤–∞—Ç—å –∏ —É–¥–∞–ª—è—Ç—å —Å–≤–æ–∏ –ø—Ä–∏–≤—ã—á–∫–∏, —É—Å—Ç–∞–Ω–∞–≤–ª–∏–≤–∞—Ç—å –ø–µ—Ä–∏–æ–¥–∏—á–Ω–æ—Å—Ç—å –∏ –ø–æ–ª—É—á–∞—Ç—å —É–≤–µ–¥–æ–º–ª–µ–Ω–∏—è —á–µ—Ä–µ–∑ Telegram.

## –û—Å–Ω–æ–≤–Ω—ã–µ –≤–æ–∑–º–æ–∂–Ω–æ—Å—Ç–∏

* **CRUD**-–æ–ø–µ—Ä–∞—Ü–∏–∏ –¥–ª—è –ª–∏—á–Ω—ã—Ö –ø—Ä–∏–≤—ã—á–µ–∫.
* **–ü—É–±–ª–∏—á–Ω—ã–π API** –¥–ª—è –ø—Ä–æ—Å–º–æ—Ç—Ä–∞ —Å–ø–∏—Å–∫–∞ –ø—É–±–ª–∏—á–Ω—ã—Ö –ø—Ä–∏–≤—ã—á–µ–∫ –¥—Ä—É–≥–∏—Ö –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–µ–π.
* **–°–ª–æ–∂–Ω—ã–µ –≤–∞–ª–∏–¥–∞—Ç–æ—Ä—ã** –¥–ª—è –æ–≥—Ä–∞–Ω–∏—á–µ–Ω–∏—è –≤—Ä–µ–º–µ–Ω–∏ –≤—ã–ø–æ–ª–Ω–µ–Ω–∏—è (–Ω–µ –±–æ–ª–µ–µ 120 —Å–µ–∫—É–Ω–¥), –ø–µ—Ä–∏–æ–¥–∏—á–Ω–æ—Å—Ç–∏ (–Ω–µ —Ä–µ–∂–µ 1 —Ä–∞–∑–∞ –≤ 7 –¥–Ω–µ–π) –∏ –ø—Ä–∞–≤–∏–ª–∞ "–í–æ–∑–Ω–∞–≥—Ä–∞–∂–¥–µ–Ω–∏–µ/–°–≤—è–∑–∞–Ω–Ω–∞—è –ø—Ä–∏–≤—ã—á–∫–∞".
* **–£–≤–µ–¥–æ–º–ª–µ–Ω–∏—è Telegram:** –ò–Ω—Ç–µ–≥—Ä–∞—Ü–∏—è —Å Celery –¥–ª—è —Ä–µ–≥—É–ª—è—Ä–Ω–æ–π –æ—Ç–ø—Ä–∞–≤–∫–∏ –Ω–∞–ø–æ–º–∏–Ω–∞–Ω–∏–π –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è–º –æ –Ω–µ–æ–±—Ö–æ–¥–∏–º–æ—Å—Ç–∏ –≤—ã–ø–æ–ª–Ω–µ–Ω–∏—è –ø—Ä–∏–≤—ã—á–∫–∏.
* **–ê–≤—Ç–æ—Ä–∏–∑–∞—Ü–∏—è:** –ò—Å–ø–æ–ª—å–∑—É–µ—Ç—Å—è JWT-–∞—É—Ç–µ–Ω—Ç–∏—Ñ–∏–∫–∞—Ü–∏—è (djoser/simple-jwt).

## üõ†–¢–µ—Ö–Ω–æ–ª–æ–≥–∏–∏ –∏ —Ç—Ä–µ–±–æ–≤–∞–Ω–∏—è

* **–Ø–∑—ã–∫:** Python 3.13
* **–§—Ä–µ–π–º–≤–æ—Ä–∫:** Django 5.2.x, Django REST Framework
* **–ë–∞–∑–∞ –¥–∞–Ω–Ω—ã—Ö:** PostgreSQL
* **–û—á–µ—Ä–µ–¥—å –∑–∞–¥–∞—á:** Celery —Å Redis (–±—Ä–æ–∫–µ—Ä)
* **–ö–æ–Ω—Ç–µ–π–Ω–µ—Ä–∏–∑–∞—Ü–∏—è:** Docker, Docker Compose
* **–£–ø—Ä–∞–≤–ª–µ–Ω–∏–µ –∑–∞–≤–∏—Å–∏–º–æ—Å—Ç—è–º–∏:** Poetry

## –ó–∞–ø—É—Å–∫ –ø—Ä–æ–µ–∫—Ç–∞ —Å –ø–æ–º–æ—â—å—é Docker Compose

–°–∞–º—ã–π –ø—Ä–æ—Å—Ç–æ–π –∏ —Ä–µ–∫–æ–º–µ–Ω–¥—É–µ–º—ã–π —Å–ø–æ—Å–æ–± –∑–∞–ø—É—Å—Ç–∏—Ç—å –ø—Ä–æ–µ–∫—Ç ‚Äî –∏—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å Docker Compose.

### 1. –ü–æ–¥–≥–æ—Ç–æ–≤–∫–∞

1.  **–ö–ª–æ–Ω–∏—Ä—É–π—Ç–µ —Ä–µ–ø–æ–∑–∏—Ç–æ—Ä–∏–π:**
    ```bash
    git clone [—Å—Å—ã–ª–∫–∞ –Ω–∞ —Ç–≤–æ–π —Ä–µ–ø–æ–∑–∏—Ç–æ—Ä–∏–π]
    cd habit_tracker
    ```
2.  **–°–æ–∑–¥–∞–π—Ç–µ —Ñ–∞–π–ª –ø–µ—Ä–µ–º–µ–Ω–Ω—ã—Ö –æ–∫—Ä—É–∂–µ–Ω–∏—è:**
    –°–æ–∑–¥–∞–π—Ç–µ —Ñ–∞–π–ª **`.env`** –≤ –∫–æ—Ä–Ω–µ –ø—Ä–æ–µ–∫—Ç–∞ (—Ä—è–¥–æ–º —Å `docker-compose.yaml`) –∏ –∑–∞–ø–æ–ª–Ω–∏—Ç–µ –µ–≥–æ, –∏—Å–ø–æ–ª—å–∑—É—è —à–∞–±–ª–æ–Ω:

    ```ini
    # .env

    # --- –ë–∞–∑–∞ –¥–∞–Ω–Ω—ã—Ö PostgreSQL ---
    DB_NAME=habit_tracker_db
    DB_USER=habit_user
    DB_PASSWORD=secretpassword
    DB_HOST=db
    DB_PORT=5432

    # --- Django ---
    SECRET_KEY=yoursecretkey
    # –ù–∞–∑–≤–∞–Ω–∏–µ —Ö–æ—Å—Ç–∞ –¥–ª—è –ø–æ–¥–∫–ª—é—á–µ–Ω–∏—è Celery –∫ Redis
    CELERY_BROKER_URL=redis://redis:6379/0
    # –î–æ–±–∞–≤–ª—è–µ–º –Ω–µ–¥–æ—Å—Ç–∞—é—â–∏–π ALLOWED_HOSTS
    ALLOWED_HOSTS=127.0.0.1,localhost 

    # --- Telegram ---
    # –¢–æ–∫–µ–Ω –±–æ—Ç–∞ –¥–ª—è –æ—Ç–ø—Ä–∞–≤–∫–∏ –Ω–∞–ø–æ–º–∏–Ω–∞–Ω–∏–π
    TELEGRAM_BOT_TOKEN=–í–ê–®_–¢–û–ö–ï–ù_–ë–û–¢–ê
    ```

### 2. –ó–∞–ø—É—Å–∫
    
    
    docker compose up --build -d
    
–í—ã–ø–æ–ª–Ω–∏—Ç–µ –∫–æ–º–∞–Ω–¥—É –≤—ã—à–µ –≤ –∫–æ—Ä–Ω–µ –ø—Ä–æ–µ–∫—Ç–∞. –û–Ω–∞ –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏ —Å–æ–±–µ—Ä–µ—Ç –æ–±—Ä–∞–∑, –∑–∞–ø—É—Å—Ç–∏—Ç –ø—è—Ç—å —Å–µ—Ä–≤–∏—Å–æ–≤ –∏ –≤—ã–ø–æ–ª–Ω–∏—Ç –º–∏–≥—Ä–∞—Ü–∏–∏.

> –§–ª–∞–≥ `-d` (detach) –∑–∞–ø—É—Å–∫–∞–µ—Ç –∫–æ–Ω—Ç–µ–π–Ω–µ—Ä—ã –≤ —Ñ–æ–Ω–æ–≤–æ–º —Ä–µ–∂–∏–º–µ.

### 3. –î–æ—Å—Ç—É–ø –∫ API

–ü–æ—Å–ª–µ –∑–∞–ø—É—Å–∫–∞ API –±—É–¥–µ—Ç –¥–æ—Å—Ç—É–ø–µ–Ω –ø–æ –∞–¥—Ä–µ—Å—É:

* **–î–æ–∫—É–º–µ–Ω—Ç–∞—Ü–∏—è Swagger/Redoc:** `http://127.0.0.1:8000/swagger/`

---

## ‚òÅÔ∏è –†–∞–∑–≤–µ—Ä—Ç—ã–≤–∞–Ω–∏–µ –Ω–∞ –£–¥–∞–ª–µ–Ω–Ω–æ–º –°–µ—Ä–≤–µ—Ä–µ (VM) –∏ CI/CD

–ü—Ä–æ–µ–∫—Ç –Ω–∞—Å—Ç—Ä–æ–µ–Ω –Ω–∞ –ù–µ–ø—Ä–µ—Ä—ã–≤–Ω—É—é –ò–Ω—Ç–µ–≥—Ä–∞—Ü–∏—é/–ù–µ–ø—Ä–µ—Ä—ã–≤–Ω–æ–µ –†–∞–∑–≤–µ—Ä—Ç—ã–≤–∞–Ω–∏–µ (CI/CD) —Å –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–µ–º GitHub Actions.

### 1. –ù–∞—Å—Ç—Ä–æ–π–∫–∞ –£–¥–∞–ª–µ–Ω–Ω–æ–≥–æ –°–µ—Ä–≤–µ—Ä–∞ (VM)

–î–ª—è —É—Å–ø–µ—à–Ω–æ–≥–æ –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–æ–≥–æ –¥–µ–ø–ª–æ—è –Ω–∞ –≤–∏—Ä—Ç—É–∞–ª—å–Ω—É—é –º–∞—à–∏–Ω—É (VM) (–Ω–∞–ø—Ä–∏–º–µ—Ä, Yandex Cloud, AWS) —É–±–µ–¥–∏—Ç–µ—Å—å, —á—Ç–æ:

* **–£—Å—Ç–∞–Ω–æ–≤–ª–µ–Ω Docker:** –ù–∞ –≤–∞—à–µ–π VM –¥–æ–ª–∂–Ω—ã –±—ã—Ç—å —É—Å—Ç–∞–Ω–æ–≤–ª–µ–Ω—ã –ø–æ—Å–ª–µ–¥–Ω–∏–µ –≤–µ—Ä—Å–∏–∏ Docker –∏ –ø–ª–∞–≥–∏–Ω `docker compose`.
* **–ù–∞—Å—Ç—Ä–æ–µ–Ω SSH-–¥–æ—Å—Ç—É–ø:** –î–æ–±–∞–≤—å—Ç–µ –≤–∞—à –ø—É–±–ª–∏—á–Ω—ã–π SSH-–∫–ª—é—á –Ω–∞ VM.
* **–û—Ç–∫—Ä—ã—Ç—ã –ø–æ—Ä—Ç—ã:** –ß–µ—Ä–µ–∑ –ø–∞–Ω–µ–ª—å —É–ø—Ä–∞–≤–ª–µ–Ω–∏—è –æ–±–ª–∞—á–Ω–æ–≥–æ –ø—Ä–æ–≤–∞–π–¥–µ—Ä–∞ (–ì—Ä—É–ø–ø—ã –±–µ–∑–æ–ø–∞—Å–Ω–æ—Å—Ç–∏) –æ—Ç–∫—Ä–æ–π—Ç–µ **TCP-–ø–æ—Ä—Ç 8000** –¥–ª—è –≤—Ö–æ–¥—è—â–µ–≥–æ —Ç—Ä–∞—Ñ–∏–∫–∞ –∏–∑ –ò–Ω—Ç–µ—Ä–Ω–µ—Ç–∞.

### 2. –ù–∞—Å—Ç—Ä–æ–π–∫–∞ GitHub Secrets

–ü—Ä–æ—Ü–µ—Å—Å –¥–µ–ø–ª–æ—è –∏—Å–ø–æ–ª—å–∑—É–µ—Ç –∫–æ–Ω—Ñ–∏–¥–µ–Ω—Ü–∏–∞–ª—å–Ω—ã–µ –¥–∞–Ω–Ω—ã–µ, —Ö—Ä–∞–Ω—è—â–∏–µ—Å—è –≤ –°–µ–∫—Ä–µ—Ç–∞—Ö –≤–∞—à–µ–≥–æ —Ä–µ–ø–æ–∑–∏—Ç–æ—Ä–∏—è GitHub.

–ü–µ—Ä–µ–π–¥–∏—Ç–µ –≤ `Settings` $\rightarrow$ `Secrets and Variables` $\rightarrow$ `Actions` –∏ –¥–æ–±–∞–≤—å—Ç–µ —Å–ª–µ–¥—É—é—â–∏–µ –ø–µ—Ä–µ–º–µ–Ω–Ω—ã–µ:

| –ò–º—è –°–µ–∫—Ä–µ—Ç–∞ | –û–ø–∏—Å–∞–Ω–∏–µ |
| :--- | :--- |
| **HOST\_IP** | –ü—É–±–ª–∏—á–Ω—ã–π IP-–∞–¥—Ä–µ—Å –≤–∞—à–µ–π VM. |
| **USERNAME** | –ò–º—è –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è –¥–ª—è SSH-–ø–æ–¥–∫–ª—é—á–µ–Ω–∏—è (–Ω–∞–ø—Ä–∏–º–µ—Ä, `ubuntu`, `test`). |
| **SSH\_PRIVATE\_KEY** | –ü—Ä–∏–≤–∞—Ç–Ω—ã–π SSH-–∫–ª—é—á –¥–ª—è –∞–≤—Ç–æ—Ä–∏–∑–∞—Ü–∏–∏. |
| **ENV\_FILE\_CONTENT** | –ü–æ–ª–Ω–æ–µ —Å–æ–¥–µ—Ä–∂–∏–º–æ–µ –≤–∞—à–µ–≥–æ —Ñ–∞–π–ª–∞ `.env` (–≤–∫–ª—é—á–∞—è –ø—É–±–ª–∏—á–Ω—ã–π IP –≤ `ALLOWED_HOSTS` –¥–ª—è —É–¥–∞–ª–µ–Ω–Ω–æ–≥–æ —Å–µ—Ä–≤–µ—Ä–∞). |

### 3. –ê–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏–π –î–µ–ø–ª–æ–π (CI/CD)

–†–∞–±–æ—á–∏–π –ø—Ä–æ—Ü–µ—Å—Å –æ–ø–∏—Å–∞–Ω –≤ —Ñ–∞–π–ª–µ `.github/workflows/main_ci_cd.yaml`.

* **–¢—Ä–∏–≥–≥–µ—Ä:** –ü—Ä–æ—Ü–µ—Å—Å –∑–∞–ø—É—Å–∫–∞–µ—Ç—Å—è –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏ –ø—Ä–∏ –∫–∞–∂–¥–æ–º `git push` –≤ –≤–µ—Ç–∫—É `main`.
* **–î–µ–π—Å—Ç–≤–∏—è:** –ü—Ä–æ—Ü–µ—Å—Å –≤—ã–ø–æ–ª–Ω—è–µ—Ç —Ç–µ—Å—Ç—ã, –∞ –∑–∞—Ç–µ–º, –ø—Ä–∏ —É—Å–ø–µ—Ö–µ, –ø–æ–¥–∫–ª—é—á–∞–µ—Ç—Å—è –∫ VM –ø–æ SSH –¥–ª—è –∫–ª–æ–Ω–∏—Ä–æ–≤–∞–Ω–∏—è –∫–æ–¥–∞, —Å–æ–∑–¥–∞–Ω–∏—è `.env` –∏ –∑–∞–ø—É—Å–∫–∞/–ø–µ—Ä–µ–∑–∞–ø—É—Å–∫–∞ Docker Compose. 

–ü–æ—Å–ª–µ —É—Å–ø–µ—à–Ω–æ–≥–æ –∑–∞–≤–µ—Ä—à–µ–Ω–∏—è CI/CD, –≤–∞—à API –±—É–¥–µ—Ç –¥–æ—Å—Ç—É–ø–µ–Ω –ø–æ –∞–¥—Ä–µ—Å—É:

`http://[–í–∞—à_–ü—É–±–ª–∏—á–Ω—ã–π_IP]:8000/swagger/`